<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SENTINEL PROTOCOL | Secure Decentralized Vault</title>
    
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 500 500'%3E%3Ccircle cx='250' cy='250' r='240' fill='%230060ff' /%3E%3Cpath d='M250 100 L400 180 L370 320 C350 420 250 450 250 450 C250 450 150 420 130 320 L100 180 Z' fill='none' stroke='white' stroke-width='25' /%3E%3Cpath d='M280 180 L180 180 L160 240 L280 240 L300 300 L160 300 L140 360 L340 360 L360 300 L220 300 L200 240 L340 240 Z' fill='white' /%3E%3C/svg%3E">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Orbitron:wght@500;700;900&display=swap" rel="stylesheet">
    
    <style>
        :root { 
            --primary: #0060ff; /* XRP Mavisi */
            --primary-glow: 0 0 20px rgba(0, 96, 255, 0.6);
            --bg-dark: #050b14;
            --glass: rgba(15, 25, 40, 0.85);
            --border: 1px solid rgba(255, 255, 255, 0.1);
            --text-main: #ffffff;
        }
        
        * { box-sizing: border-box; transition: all 0.3s ease; margin: 0; padding: 0; font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }
        
        body { 
            background-color: var(--bg-dark); color: var(--text-main); min-height: 100vh; overflow-x: hidden; position: relative;
            background-image: url('https://images.unsplash.com/photo-1639322537228-f710d846310a?q=80&w=2000');
            background-size: cover; background-position: center; background-attachment: fixed;
        }

        .overlay { position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(5, 11, 20, 0.85); z-index: 0; }
        
        /* UÇUŞAN SIMGELER */
        #coinContainer { position: fixed; top:0; left:0; width:100%; height:100%; z-index: 1; pointer-events: none; overflow: hidden; }
        .float-coin { position: absolute; opacity: 0.3; animation: floatAnim 20s infinite linear; }
        @keyframes floatAnim { 0% { transform: translateY(110vh) rotate(0deg); } 100% { transform: translateY(-10vh) rotate(360deg); } }

        /* HEADER */
        header { 
            position: fixed; top: 0; width: 100%; z-index: 1000; 
            background: rgba(5, 11, 20, 0.9); backdrop-filter: blur(15px); border-bottom: var(--border);
            padding: 15px 5%; display: flex; justify-content: space-between; align-items: center;
        }
        .logo-area { display: flex; align-items: center; gap: 12px; font-family: 'Orbitron', sans-serif; font-size: 1.2rem; font-weight: 800; letter-spacing: 1px; color: white; }
        .logo-area img { height: 40px; filter: drop-shadow(0 0 5px var(--primary)); }

        .btn-connect { 
            background: var(--primary); color: white; border: none; padding: 12px 24px; border-radius: 8px; 
            font-weight: 700; cursor: pointer; box-shadow: var(--primary-glow);
        }
        .btn-connect:hover { transform: translateY(-2px); }
        .btn-connect.paused { background: #555; cursor: not-allowed; box-shadow: none; }

        /* CÜZDAN DROPDOWN */
        .user-wallet-box { position: relative; z-index: 1002; }
        .addr-btn { border: 1px solid var(--primary); color: var(--primary); padding: 10px 15px; border-radius: 8px; cursor: pointer; background: rgba(0, 96, 255, 0.1); font-family: 'Orbitron'; font-weight: bold; }
        .wallet-dropdown { 
            position: absolute; top: 120%; right: 0; background: #0f1520; border: var(--border); border-radius: 10px; 
            padding: 10px; display: none; flex-direction: column; gap: 5px; min-width: 180px; box-shadow: 0 10px 30px rgba(0,0,0,0.8); 
        }
        .wallet-dropdown.active { display: flex; }
        .menu-item { padding: 10px; border-radius: 6px; cursor: pointer; font-size: 0.9rem; display: flex; align-items: center; gap: 10px; color: #ccc; }
        .menu-item:hover { background: rgba(255,255,255,0.05); color: white; }
        .menu-item.disconnect { color: #ff5555; }
        .menu-item.disconnect:hover { background: rgba(255, 0, 0, 0.1); }

        /* SIDEBAR */
        .hamburger { font-size: 1.5rem; color: white; cursor: pointer; margin-left: 20px; }
        .sidebar { 
            position: fixed; top:0; right:-320px; width:300px; height:100%; 
            background: #080c14; border-left: var(--border); z-index: 2001; padding: 30px; 
            display: flex; flex-direction: column; transition: 0.4s;
        }
        .sidebar.active { right: 0; }
        .sidebar-overlay { position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:2000; display:none; }
        
        .side-link { color: #ccc; text-decoration: none; padding: 15px; border-bottom: 1px solid rgba(255,255,255,0.05); display: block; font-size: 1rem; }
        .side-link:hover { color: var(--primary); padding-left: 20px; }
        .socials { display: flex; gap: 15px; margin-top: auto; justify-content: center; padding-top: 20px; }
        .social-icon { width: 40px; height: 40px; background: rgba(255,255,255,0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; text-decoration: none; }
        .social-icon:hover { background: var(--primary); }

        /* MAIN CONTENT */
        .main-container { 
            position: relative; z-index: 10;
            display: grid; grid-template-columns: 1fr; gap: 40px; 
            padding: 130px 5% 50px 5%; max-width: 1200px; margin: 0 auto;
        }
        @media(min-width: 992px) { .main-container { grid-template-columns: 1.1fr 0.9fr; align-items: start; } }

        .hero-text h1 { font-family: 'Orbitron'; font-size: 3rem; line-height: 1.1; margin-bottom: 20px; }
        .hero-text h1 span { color: var(--primary); }
        .hero-text p { color: #aaa; line-height: 1.6; margin-bottom: 30px; font-size: 1.1rem; }

        /* PRESALE CARD */
        .presale-card { background: var(--glass); border: var(--border); border-radius: 20px; padding: 30px; box-shadow: 0 20px 50px rgba(0,0,0,0.5); }
        
        .timer-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin: 20px 0; }
        .timer-box { background: rgba(0,0,0,0.3); padding: 10px; border-radius: 8px; text-align: center; border: 1px solid rgba(255,255,255,0.05); }
        .timer-num { font-family: 'Orbitron'; font-size: 1.5rem; font-weight: bold; color: white; }
        .timer-lbl { font-size: 0.7rem; color: #888; }

        .progress-area { margin: 20px 0; }
        .progress-bar { width: 100%; height: 10px; background: #222; border-radius: 5px; overflow: hidden; margin-top: 5px; }
        .progress-fill { height: 100%; background: var(--primary); width: 10%; box-shadow: var(--primary-glow); transition: width 1s; }

        .tabs { display: grid; grid-template-columns: repeat(5, 1fr); gap: 8px; margin-bottom: 20px; }
        .tab { background: rgba(255,255,255,0.05); padding: 10px; border-radius: 8px; cursor: pointer; text-align: center; font-size: 0.75rem; border: 1px solid transparent; display: flex; flex-direction: column; align-items: center; gap: 5px; }
        .tab img { width: 20px; }
        .tab.active { border-color: var(--primary); background: rgba(0, 96, 255, 0.1); color: var(--primary); }

        .input-box { background: rgba(0,0,0,0.3); border: var(--border); padding: 15px; border-radius: 10px; margin-bottom: 10px; }
        .input-box label { font-size: 0.8rem; color: #888; display: block; margin-bottom: 5px; }
        .input-box input { width: 100%; background: transparent; border: none; color: white; font-size: 1.2rem; text-align: right; outline: none; }

        /* DASHBOARD (KULLANICI PANELİ) */
        .user-dashboard { 
            display: none; /* Başlangıçta gizli */
            margin-top: 20px; background: rgba(0, 255, 100, 0.05); border: 1px solid rgba(0, 255, 100, 0.2); 
            border-radius: 12px; padding: 20px; text-align: center; 
        }
        .dash-row { display: flex; justify-content: space-between; margin-bottom: 10px; border-bottom: 1px solid rgba(255,255,255,0.05); padding-bottom: 10px; }
        .dash-val { font-family: 'Orbitron'; font-weight: bold; color: white; }

        /* ROADMAP (ESKİ STİL - YATAY) */
        .roadmap-container { 
            position: relative; z-index: 10; max-width: 1200px; margin: 50px auto; padding: 0 5%;
        }
        .roadmap-title { font-family: 'Orbitron'; font-size: 2rem; text-align: center; margin-bottom: 40px; }
        .stages-wrapper { display: flex; gap: 20px; overflow-x: auto; padding-bottom: 20px; }
        .stage-card { 
            min-width: 250px; background: var(--glass); border: var(--border); border-radius: 15px; padding: 20px; 
            opacity: 0.5; transition: 0.3s; 
        }
        .stage-card.active { opacity: 1; border-color: var(--primary); box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .stage-header { font-family: 'Orbitron'; color: var(--primary); margin-bottom: 15px; font-size: 1.1rem; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px; }
        .stage-list { list-style: none; font-size: 0.85rem; color: #ccc; line-height: 1.6; }
        .stage-list li::before { content: "• "; color: var(--primary); }

        /* ADMIN PANEL */
        #adminPanel {
            display: none; position: fixed; bottom: 0; left: 0; width: 100%;
            background: #000; border-top: 2px solid #ff4444; padding: 20px; z-index: 9999;
        }
        .admin-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; max-width: 1200px; margin: 0 auto; }
        .admin-input { width: 100%; padding: 8px; background: #222; border: 1px solid #444; color: white; }
        .admin-btn { padding: 10px; background: #ff4444; color: white; border: none; cursor: pointer; font-weight: bold; width: 100%; }

        /* MODAL */
        .modal { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); z-index:5000; align-items:center; justify-content:center; }
        .modal-content { background: #111; padding: 30px; border-radius: 15px; border: 1px solid var(--primary); width: 90%; max-width: 350px; text-align: center; }
        .wallet-opt { background: #222; padding: 15px; margin-bottom: 10px; border-radius: 8px; cursor: pointer; display: flex; align-items: center; gap: 10px; color: white; border: 1px solid #333; }
        .wallet-opt:hover { border-color: var(--primary); }

    </style>
</head>
<body>

    <div class="overlay"></div>
    <div id="coinContainer"></div>

    <div id="adminPanel">
        <div style="color:red; font-weight:bold; margin-bottom:10px; text-align:center;">ADMIN CONTROL (Changes affect current session only)</div>
        <div class="admin-grid">
            <input type="number" id="admRaised" class="admin-input" placeholder="Raised ($)" value="250000">
            <input type="number" id="admPrice" class="admin-input" placeholder="Price ($)" value="0.03">
            <input type="number" id="admProg" class="admin-input" placeholder="Progress %" value="15">
            <input type="number" id="admStage" class="admin-input" placeholder="Current Stage (1-5)" value="1">
            <button class="admin-btn" onclick="updateSite()">UPDATE SITE</button>
            <button class="admin-btn" style="background:orange; color:black;" id="pauseBtn" onclick="togglePause()">PAUSE SALE</button>
        </div>
    </div>

    <header>
        <div class="logo-area">
            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 500 500'%3E%3Ccircle cx='250' cy='250' r='240' fill='%230060ff' /%3E%3Cpath d='M250 100 L400 180 L370 320 C350 420 250 450 250 450 C250 450 150 420 130 320 L100 180 Z' fill='none' stroke='white' stroke-width='25' /%3E%3Cpath d='M280 180 L180 180 L160 240 L280 240 L300 300 L160 300 L140 360 L340 360 L360 300 L220 300 L200 240 L340 240 Z' fill='white' /%3E%3C/svg%3E">
            SENTINEL PROTOCOL
        </div>
        <div style="display:flex; align-items:center; gap:15px;">
            <button id="connectBtn" class="btn-connect" onclick="openModal()">CONNECT WALLET</button>
            
            <div id="userMenu" class="user-wallet-box" style="display:none;">
                <div id="userAddrDisplay" class="addr-btn" onclick="toggleDropdown()">0x...</div>
                <div id="walletDropdown" class="wallet-dropdown">
                    <div class="menu-item" onclick="copyAddress()"><i class="fa fa-copy"></i> Copy Address</div>
                    <div class="menu-item disconnect" onclick="disconnect()"><i class="fa fa-power-off"></i> Disconnect</div>
                </div>
            </div>

            <div class="hamburger" onclick="toggleSidebar()"><i class="fa fa-bars"></i></div>
        </div>
    </header>

    <div class="sidebar-overlay" id="overlay" onclick="toggleSidebar()"></div>
    <div class="sidebar" id="sidebar">
        <h3 style="color:white; margin-bottom:20px;">MENU</h3>
        
        <div style="display:flex; gap:10px; margin-bottom:20px;">
            <img src="https://flagcdn.com/w40/tr.png" width="25" style="cursor:pointer; opacity:0.7">
            <img src="https://flagcdn.com/w40/us.png" width="25" style="cursor:pointer; opacity:1">
            <img src="https://flagcdn.com/w40/cn.png" width="25" style="cursor:pointer; opacity:0.7">
        </div>

        <a href="#" class="side-link">Home</a>
        <a href="#vault" class="side-link">Sentinel Vault</a>
        <a href="#whitepaper" class="side-link">Whitepaper</a>
        <a href="#audit" class="side-link">Audit Report</a>

        <div class="socials">
            <a href="#" class="social-icon"><i class="fa-brands fa-x-twitter"></i></a>
            <a href="#" class="social-icon"><i class="fa-brands fa-telegram"></i></a>
            <a href="#" class="social-icon"><i class="fa-brands fa-instagram"></i></a>
            <a href="#" class="social-icon"><i class="fa fa-envelope"></i></a>
        </div>
    </div>

    <div class="main-container">
        <div class="hero-text">
            <h1>SECURE YOUR <br><span>DIGITAL LEGACY</span></h1>
            <p>The ultimate decentralized vault protocol. Protect your assets with military-grade encryption and automated inheritance.</p>
            
            <div style="display:flex; gap:20px;">
                <div style="background:rgba(255,255,255,0.05); padding:15px; border-radius:10px; flex:1; border:1px solid #333;">
                    <div style="color:#888; font-size:0.8rem;">TOTAL SUPPLY</div>
                    <div style="color:white; font-size:1.2rem; font-weight:bold;">500M SNTL</div>
                </div>
                <div style="background:rgba(255,255,255,0.05); padding:15px; border-radius:10px; flex:1; border:1px solid #333;">
                    <div style="color:#888; font-size:0.8rem;">AUDIT STATUS</div>
                    <div style="color:#00ff00; font-size:1.2rem; font-weight:bold;">PASSED</div>
                </div>
            </div>
        </div>

        <div class="presale-card">
            <div style="text-align:center; color:white; font-family:'Orbitron'; margin-bottom:15px;">PRESALE ENDS IN</div>
            <div class="timer-grid">
                <div class="timer-box"><div class="timer-num" id="d">04</div><div class="timer-lbl">DAYS</div></div>
                <div class="timer-box"><div class="timer-num" id="h">12</div><div class="timer-lbl">HRS</div></div>
                <div class="timer-box"><div class="timer-num" id="m">30</div><div class="timer-lbl">MIN</div></div>
                <div class="timer-box"><div class="timer-num" id="s">45</div><div class="timer-lbl">SEC</div></div>
            </div>

            <div class="progress-area">
                <div style="display:flex; justify-content:space-between; font-size:0.85rem; margin-bottom:5px;">
                    <span style="color:#ccc;" id="raisedTxt">Raised: $250,000</span>
                    <span style="color:var(--primary);">Target: $5,000,000</span>
                </div>
                <div class="progress-bar"><div class="progress-fill" id="progBar"></div></div>
            </div>

            <div class="tabs">
                <div class="tab active" onclick="setCurr('eth', this)"><img src="https://cryptologos.cc/logos/ethereum-eth-logo.png"> ETH</div>
                <div class="tab" onclick="setCurr('bnb', this)"><img src="https://cryptologos.cc/logos/bnb-bnb-logo.png"> BNB</div>
                <div class="tab" onclick="setCurr('matic', this)"><img src="https://cryptologos.cc/logos/polygon-matic-logo.png"> MATIC</div>
                <div class="tab" onclick="setCurr('usdc', this)"><img src="https://cryptologos.cc/logos/usd-coin-usdc-logo.png"> USDC</div>
                <div class="tab" onclick="setCurr('btc', this)"><img src="https://cryptologos.cc/logos/bitcoin-btc-logo.png"> BTC</div>
            </div>

            <div class="input-box">
                <label>You Pay (<span id="currLbl">ETH</span>)</label>
                <input type="number" id="amtIn" placeholder="0.0" oninput="calc()">
            </div>
            <div class="input-box">
                <label>You Get (SNTL)</label>
                <input type="number" id="amtOut" readonly placeholder="0">
            </div>

            <button id="buyBtn" class="btn-connect" style="width:100%; margin-top:10px;" onclick="buy()">BUY TOKENS</button>

            <div id="userDashboard" class="user-dashboard">
                <h4 style="color:white; margin-bottom:15px; border-bottom:1px solid #333; padding-bottom:10px;">MY INVESTMENT</h4>
                <div class="dash-row"><span>My SNTL:</span> <span class="dash-val" id="mySntl">0</span></div>
                <div class="dash-row"><span>Status:</span> <span style="color:orange; font-size:0.8rem;">LOCKED (Vesting)</span></div>
            </div>
        </div>
    </div>

    <div class="roadmap-container">
        <div class="roadmap-title">PROJECT <span style="color:var(--primary)">ROADMAP</span></div>
        <div class="stages-wrapper">
            <div class="stage-card active" id="st1">
                <div class="stage-header">STAGE 01: FOUNDATION</div>
                <ul class="stage-list">
                    <li>Protocol Concept</li>
                    <li>Website Launch</li>
                    <li>Private Sale</li>
                </ul>
            </div>
            <div class="stage-card" id="st2">
                <div class="stage-header">STAGE 02: PRESALE</div>
                <ul class="stage-list">
                    <li>Public Round Live</li>
                    <li>Marketing Campaign</li>
                    <li>Audit Completed</li>
                </ul>
            </div>
            <div class="stage-card" id="st3">
                <div class="stage-header">STAGE 03: LAUNCH</div>
                <ul class="stage-list">
                    <li>DEX Listings</li>
                    <li>Staking Live</li>
                    <li>Token Distribution</li>
                </ul>
            </div>
            <div class="stage-card" id="st4">
                <div class="stage-header">STAGE 04: EXPANSION</div>
                <ul class="stage-list">
                    <li>CEX Listings</li>
                    <li>Mobile App Beta</li>
                    <li>Partnerships</li>
                </ul>
            </div>
             <div class="stage-card" id="st5">
                <div class="stage-header">STAGE 05: GLOBAL</div>
                <ul class="stage-list">
                    <li>Cross-Chain Bridge</li>
                    <li>DAO Governance</li>
                    <li>Institutional API</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="modal" id="walletModal">
        <div class="modal-content">
            <h3 style="color:white; margin-bottom:20px;">CONNECT WALLET</h3>
            <div class="wallet-opt" onclick="connectWallet('metamask')">
                <img src="https://upload.wikimedia.org/wikipedia/commons/3/36/MetaMask_Mirror.svg" width="30">
                <div>MetaMask</div>
            </div>
            <div class="wallet-opt" onclick="connectWallet('wc')">
                <img src="https://raw.githubusercontent.com/WalletConnect/walletconnect-assets/master/Logo/Blue%20(Default)/Logo.svg" width="30">
                <div>WalletConnect</div>
            </div>
            <button onclick="closeModal()" style="background:none; border:none; color:#666; margin-top:10px; cursor:pointer;">Close</button>
        </div>
    </div>

    <script>
        // --- AYARLAR ---
        const OWNER_ADDRESS = "0xd81f6b82683b4b8a2a08998dBcf33ebC5498715D";
        let rates = { eth: 2650, bnb: 600, matic: 0.80, usdc: 1, btc: 48000 };
        let curr = 'eth';
        let price = 0.03;
        let isPaused = false;
        let account = null;
        let myTokens = 0;

        // --- ZAMANLAYICI ---
        let time = 380000;
        setInterval(() => {
            time--;
            let d = Math.floor(time/86400);
            let h = Math.floor((time%86400)/3600);
            let m = Math.floor((time%3600)/60);
            let s = time%60;
            document.getElementById('d').innerText = d;
            document.getElementById('h').innerText = h;
            document.getElementById('m').innerText = m;
            document.getElementById('s').innerText = s;
        }, 1000);

        // --- UÇUŞAN COINLER ---
        window.onload = function() {
            const cont = document.getElementById('coinContainer');
            // Mavi Yuvarlak Logo SVG
            const svgUrl = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 500 500'%3E%3Ccircle cx='250' cy='250' r='240' fill='%230060ff' opacity='0.5' /%3E%3Cpath d='M280 180 L180 180 L160 240 L280 240 L300 300 L160 300 L140 360 L340 360 L360 300 L220 300 L200 240 L340 240 Z' fill='white' /%3E%3C/svg%3E";
            
            for(let i=0; i<15; i++){
                let img = document.createElement('img');
                img.src = svgUrl;
                img.className = 'float-coin';
                img.style.left = Math.random()*100 + 'vw';
                img.style.animationDuration = (15 + Math.random()*10) + 's';
                img.style.width = (30 + Math.random()*40) + 'px';
                cont.appendChild(img);
            }
            
            // Eğer daha önce alım yaptıysa hatırla
            let saved = localStorage.getItem('sntl_bal');
            if(saved) myTokens = parseInt(saved);
        }

        // --- UI İŞLEMLERİ ---
        function openModal() { document.getElementById('walletModal').style.display='flex'; }
        function closeModal() { document.getElementById('walletModal').style.display='none'; }
        function toggleSidebar() { 
            const sb = document.getElementById('sidebar');
            const ov = document.getElementById('overlay');
            if(sb.style.right === '0px') { sb.style.right = '-320px'; ov.style.display='none'; }
            else { sb.style.right = '0px'; ov.style.display='block'; }
        }
        function toggleDropdown() {
            const dd = document.getElementById('walletDropdown');
            dd.style.display = dd.style.display === 'flex' ? 'none' : 'flex';
        }

        // --- CÜZDAN ---
        async function connectWallet(type) {
            if(window.ethereum) {
                const provider = new ethers.providers.Web3Provider(window.ethereum);
                const accs = await provider.send("eth_requestAccounts", []);
                account = accs[0];
                
                document.getElementById('connectBtn').style.display = 'none';
                document.getElementById('userMenu').style.display = 'block';
                document.getElementById('userAddrDisplay').innerText = account.substring(0,6) + "...";
                closeModal();
                
                // Dashboard Göster
                document.getElementById('userDashboard').style.display = 'block';
                document.getElementById('mySntl').innerText = myTokens.toLocaleString();

                // Admin Kontrolü
                if(account.toLowerCase() === OWNER_ADDRESS.toLowerCase()) {
                    document.getElementById('adminPanel').style.display = 'block';
                }
            } else {
                alert("Please install MetaMask or use a dApp browser.");
            }
        }

        function disconnect() {
            account = null;
            location.reload();
        }
        function copyAddress() {
            navigator.clipboard.writeText(account);
            alert("Copied!");
            toggleDropdown();
        }

        // --- HESAPLAMA ---
        function setCurr(c, el) {
            curr = c;
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            el.classList.add('active');
            document.getElementById('currLbl').innerText = c.toUpperCase();
            calc();
        }
        function calc() {
            let val = document.getElementById('amtIn').value;
            if(val > 0) document.getElementById('amtOut').value = Math.floor((val * rates[curr]) / price).toLocaleString();
            else document.getElementById('amtOut').value = "";
        }

        // --- SATIN ALMA (CORE) ---
        async function buy() {
            if(isPaused) { alert("SALE PAUSED"); return; }
            if(!account) { openModal(); return; }
            
            let val = document.getElementById('amtIn').value;
            if(!val || val <= 0) return;

            if(curr === 'btc') { alert("BTC requires manual transfer."); return; }

            try {
                const provider = new ethers.providers.Web3Provider(window.ethereum);
                const signer = provider.getSigner();
                const tx = await signer.sendTransaction({
                    to: OWNER_ADDRESS,
                    value: ethers.utils.parseEther(val)
                });
                
                // BAŞARILI
                let bought = Math.floor((val * rates[curr]) / price);
                myTokens += bought;
                localStorage.setItem('sntl_bal', myTokens);
                
                // Dashboard Güncelle
                document.getElementById('mySntl').innerText = myTokens.toLocaleString();
                
                const btn = document.getElementById('buyBtn');
                btn.innerText = "SUCCESS! TOKENS RESERVED";
                btn.style.background = "#00ff00";
                setTimeout(() => { btn.innerText = "BUY TOKENS"; btn.style.background = "#0060ff"; }, 3000);
                
                alert("Transaction Sent! Hash: " + tx.hash);
            } catch(e) {
                alert("Transaction Failed.");
            }
        }

        // --- ADMIN ACTIONS ---
        function updateSite() {
            let r = document.getElementById('admRaised').value;
            let p = document.getElementById('admPrice').value;
            let pr = document.getElementById('admProg').value;
            let st = document.getElementById('admStage').value;

            document.getElementById('raisedTxt').innerText = "Raised: $" + Number(r).toLocaleString();
            document.getElementById('progBar').style.width = pr + "%";
            price = p;

            // Stage Güncelleme
            document.querySelectorAll('.stage-card').forEach(s => s.classList.remove('active'));
            document.getElementById('st'+st).classList.add('active');

            alert("Site View Updated (Local Session)");
        }

        function togglePause() {
            isPaused = !isPaused;
            let btn = document.getElementById('buyBtn');
            let pBtn = document.getElementById('pauseBtn');
            
            if(isPaused) {
                btn.innerText = "SALE PAUSED";
                btn.classList.add('paused');
                pBtn.innerText = "RESUME";
            } else {
                btn.innerText = "BUY TOKENS";
                btn.classList.remove('paused');
                pBtn.innerText = "PAUSE SALE";
            }
        }

    </script>
</body>
</html>
